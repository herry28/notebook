# linux概述

linux是一款==操作系统==，免费开源的。特点：安全、高效、处理高并发非常强

linux（==内核==）的主要发行版：

- centos
- ubuntu
- redhat

linux & unix：



## window & VM & Centos

window是本机

vm软件：用来创建一个==虚拟机（空间）==（centos），

centos：通过vm软件在创建好的虚拟机空间上安装centos操作系统（==文件==）

虚拟机的网络连接3种形式：

- 桥接模式：linux可以和其他系统通信，但可能造成ip冲突
- ==NAT模式==：==网络地址转换==方式，linux可以访问外网，但外网不能访问linux，且不会造成ip冲突
- 主机模式：linux是独立的主机，不能访问外网

xshell：远程登录linux（前提：需要linux启用==sshd服务==，该服务会监听22号端口）

xftp：远程上传下载文件





# linux文件目录

==在linux世界里，一切皆文件==。linux的目录中有且只有一个根目录，各个目录存放的内容时规划好的，不能乱放。

==/bin==（/usr/bin、/usr/local/bin）：存放经常使用的命令

/sbin（/usr/sbin、/usr/local/sbin）：存放系统管理员使用的系统管理程序

==/home==：存放==普通用户的主目录==。在linux中每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的

==/root==：存放==系统管理员的主目录==

==/etc==：所有的系统管理所需要的==配置文件和子目录==

- /etc/passwd：用户配置文件（存放用户信息）
  - 每行的含义：用户名：口令：用户标识浩：组标识号：注释性描述：家目录：登录shell
- /etc/group：组配置文件（存放组信息）
  - 每行的含义：组名：口令：组标识号：组内用户列表
- /etc/shadow：口令配置文件（存放用户密码和登录信息，加密的）
  - 每行的含义：登录名：加密口令：最后一次修改时间：最小时间间隔：最大时间间隔：警告时间：不活动时间：失效时间：标志
- /etc/inittab：系统的==运行级别==配置文件

==/usr==：==用户的很多应用程序和文件==都放在这个目录下，类似于windows下的program files目录

==/usr/local==：给主机额外==安装软件所安装的目录==，一般是通过编译源码方式安装的程序

==/var==：存放==不断扩充的东西==，习惯将经常被修改的目录放在该目录下，包括各种日志文件

==/boot==：存放启动linux时使用的一些核心文件，包括一些连接文件及镜像文件

==/media==：linux系统会==自动识别==一些设备，如u盘、光驱等，当识别后，linux会把==识别到的设备挂载==到该目录下

==/mnt==：是为了==让用户临时挂载别的文件系统==，可以将外部的存储挂载在/mnt上，然后进入该目录就可以查看里面的内容了

/opt：给主机额外安装软件所摆放的目录。如安装oracle数据库就可以放到该目录下，默认为空

/tmp：存放临时文件

/lib：系统开机所需要最基本的动态连接共享库，其作用类似于window里的dll文件。几乎所有的应用程序都需要用到这些共享库

/lost+found：一般情况下是空的，当系统非法关机后，这里就存放了一些文件

/dev：类似windows的设备管理器，==把所有的硬件以文件的形式==存储在该目录下

与linux内核相关的目录（不要乱动）：

- /proc：一个虚拟目录，它是系统内存的映射，访问这个目录来获取系统信息
- /srv：service的缩写，该目录存放一些服务启动之后需要提取的数据
- /sys：这是linux2.6内核的一个很大变化，该目录下安装了2.6内核中新出现的一个文件系统







# vi & vim==文本编辑器==

所有的linux系统都会内建vi文本编辑器

vim具有程序编辑的能力，可看做是vi的增强版

vi和vim有3种常见模式：

- 正常模式（==vim==）：此模式下==可以使用快捷键==
- 插入模式（==i==）：此模式下，==可以输入内容==。
- 命令行模式（==esc==）：此模式下可以完成读取、存盘、替换、离开、显示行号等
  - :wq：保存退出
  - :q：
  - :q!：强制退出

vi和vim的快捷键：

- yy：拷贝
- p：粘贴
- u：撤销
- dd：删除
- :set nu：设置行号
- G：最末行
- g：最首行
- /：搜索







# linux命令

## linux系统==运行级别==概念

linux总共有7个运行级别，常用运行级别是3和5，要更改默认的运行级别可修改/etc/inittab配置文件

- 0：关机

- 1：单用户（找回丢失密码）
- 2：多用户状态（没有网络服务）
- 3：多用户状态（有网络服务）
- 4：系统未使用保留给用户
- 5：图形界面
- 6：系统重启



## 关机 & 重启

shutdown

- shutdown -h now：立即关机
- shutdown -h 1:1分钟后关机
- shutdown -r now：立即重启

halt：直接使用，效果等价于关机

init 0：关机

reboot：重启系统

==syn==：把内存数据同步到磁盘。当我们关机或重启时，都应该先执行下sync命令，防止数据丢失。



## 用户管理（增删改查）

Linux是一个==多用户多任务==的操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号身份进入系统。

linux的用户==至少==要==属于一个组==。

useradd [选项] 用户名：添加用户

- 当用户创建成功后，会==自动创建和用户同名的家目录==
- -d 指定目录：为新创建的用户指定家目录
- ==-g== 组名：指定组

passwd 用户名：设置或修改密码

userdel 用户名：删除用户

- -r：删除用户的同时删除其家目录（工作中一般会保留家目录）

id 用户名：查询用户信息。若用户不存在，则返回无此用户

su 用户名：切换用户

- 从权限高的用户切换到权限低的用户，不需要输入密码，反之需要
- 当需要返回到原来用户使，使用==exit==命令

logout：注销用户

- logout命令在图形运行级别无效，在运行级别3下有效

whoami：查看当前用户



## 常用命令

==init n==：切换到指定运行级别n

- 如何找回root密码？（==不能远程找回==）
  - 进入单用户模式，然后修改root密码。因为单用户模式下，root不需要密码就可以登录
    - 开机--->引导时输入回车键--->输入e--->选择kernel（编辑内核），输入e--->1--->回车--->b--->进入单用户模式--->passwd root

man [命令]：

help [命令]：查看命令的使用

### 文件目录类命令

pwd：显示当前工作目录的绝对路径

ls ：显示目录或文件

- -a：显示所有的文件
- -l：详情

cd ：切换目录

- cd ~：回到家目录
- cd .. ：回到上级目录

mkdir：创建目录

- -p：创建多级目录

rmdir：删除空目录

rm -rf：删除==非空==目录

touch：创建空文件

cat：查看文件，以只读方式

- -n：指定行号

- |more：分页查看

less：分屏查看文件（大文件时效率高）

==cp==：拷贝文件到指定目录

- ==-r==：==递归==复制整个文件夹

mv：移动文件或重命名

重定向(覆盖)：>

追加：>>

echo：输出内容到控制台

head：显示文件头部前10行

tail：显示文件尾部10行

- ==-f：实时监控==

history：查看以执行过的指令

### 时间日期

date：显示当前时间

- -s：设置日期

cal：查看日历

### 搜索查找

find：查找满足条件的文件或目录

- -name：按文件名
- -user：按文件所属用户
- ==-size==：按文件大小

locate：快速定位文件路径，必须先使用==updatedb==命令创建locate数据库

grep：过滤查找

|：管道符

### 压缩和解压缩

tar -zcvf ：压缩

tar -zxvf：解压（指定解压到的目录要存在，否则报错）







# 组管理 & 权限管理

### 组管理

类似于角色，系统可以对有共性的多个用户进行统一管理。

在linux中，每个用户必须属于一个组。linux中的每个文件有所有者、所在组、其他组的概念。

- 所有者：文件的创建者
  - ls -ahl：查看文件所有者
  - chown 用户名 文件名：修改文件所有者
- 所在组
- 其他组

groupadd 组名：创建组

gruopdel 组名：删除组

==usermod -g 组名 用户名==：修改用户所在组

==chgrp 组名 文件名==：修改文件所在组

## 权限管理

文件类型：

- -：普通文件
- d：目录
- l：软链接
- c：字符设备（键盘、鼠标）
- b：块文件，硬盘

rwx权限：

- r（4）：可读
- w（2）：可写
- x（1）：可执行

==chmod==：修改文件或目录的权限









# 定时任务调度

任务调度：指系统在某个时间执行特定的命令或程序

任务调度分类：

- 系统工作：有些重要的工作必须周而复始的执行
- 个别用户工作：个别用户可能希望执行某些程序，如数据库的备份

==crontab==：进行定时任务设置

- -e：编辑定时任务
- -l：查询定时任务
- -r：删除当前用户所有的定时任务







# 磁盘分区、挂载

lsblk -f：查看系统的分区和挂载

fdisk：分区

mkfs：格式化

mount -a：自动挂载

df -lh：查询系统磁盘使用情况

du -h：查询指定目录磁盘占用情况









# 网络配置







# 进程管理

在linux中，每个执行的程序都称为一个==进程==。每个进程都会分配一个id号。

每个进程都会对应一个父进程

每个进程以==前台和后台（守护进程）==方式存在

一般系统的服务都是以后台进程的方式存在的，而且都会常驻在系统中，直到关机才结束。

==ps -aux | grep== ：查看进程

ps -ef：查看父进程

kill -9 进程号：强制杀死进程（踢掉非法登录、自杀）

killall 名称：通过名称杀

pstree：以树状展示进程

top：动态监控进程

==netstat -anp== ：监控系统所有的网络服务

## 服务管理

==服务本质就是进程==，但是是运行在后台的，通常会监听某个端口，等待其它程序的请求。

==systemctl 服务名 start==：启动服务

telnet ip 端口：在cmd窗口中，测试某个端口是否可用







# rpm包 & yum包 管理



rpm -aq：查询所安装的所有rpm软件包

rpm -iq 软件包：查询安装的rpm软件包信息

rpm -ivh 软件包：安装软件包

rpm -e 软件包：卸载软件包

## yum包管理（联网）

yum是前端包管理器，可以==自动处理依赖==关系

yum list |grep xx：查询xx是否可用

yum install xx：安装